(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11e8de62"],{"1f93":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-date-picker",{staticClass:"limitDateRange",class:t.className,style:"width: "+t.width+"px",attrs:{"value-format":t.valueFormat,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{focus:t.handlefocus},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})},s=[],l=(a("c5f6"),{data:function(){var t=this;return{pickerOptions:{disabledDate:t.disabledDate,onPick:function(e){e.maxDate;var a=e.minDate;t.minDate=a}},minDate:"",value:[]}},props:{limit:{default:1,type:Number},width:{type:String},valueFormat:{type:String},className:{type:String}},watch:{value:function(){this.$emit("change",this.value)}},methods:{disabledDate:function(t){var e=t.getTime(),a=this.minDate?this.minDate.getTime():"",n=2592e6,s=a?+new Date(a-n*this.limit):"",l=+new Date(a+n*this.limit);return t.getTime()>Date.now()||s&&e-s<0||e-l>0},reset:function(){this.value=[],this.minDate=""},handlefocus:function(){this.minDate=""}}}),i=l,r=(a("e6a2"),a("2877")),o=Object(r["a"])(i,n,s,!1,null,"07e6f6c7",null);e["a"]=o.exports},"2cf0":function(t,e,a){"use strict";var n=a("be16"),s=a.n(n);s.a},"386d":function(t,e,a){"use strict";var n=a("cb7c"),s=a("83a1"),l=a("5f1b");a("214f")("search",1,(function(t,e,a,i){return[function(a){var n=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,n):new RegExp(a)[e](String(n))},function(t){var e=i(a,t,this);if(e.done)return e.value;var r=n(t),o=String(this),c=r.lastIndex;s(c,0)||(r.lastIndex=0);var u=l(r,o);return s(r.lastIndex,c)||(r.lastIndex=c),null===u?-1:u.index}]}))},"3f92":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"selectWrap"},[a("div",{staticClass:"row"},[a("div",{staticClass:"part"},[a("Search",{ref:"search",staticClass:"input",staticStyle:{width:"256px"},attrs:{fetchUrl:t.api.empl,placeholder:"请输入姓名或者员工编号",handleSelect:t.handleSelect}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.staffDetail.is_out_abnormal,expression:"staffDetail.is_out_abnormal"}],staticClass:"out_abnormal_wrap"},[a("i",{staticClass:"out_abnormal_icon"}),a("span",{staticClass:"out_abnormal_text"},[t._v("外勤异常")])])],1),a("div",{staticClass:"part",staticStyle:{flex:"2","text-align":"start"}},[a("span",{staticClass:"label"},[t._v("考勤周期：")]),a("LimitDateRange",{ref:"dateRange",attrs:{className:"input",limit:2,width:"256","value-format":"yyyy-MM-dd"},on:{change:t.dateRangeChange}})],1),a("div",{staticClass:"btnWrap"},[a("el-button",{staticClass:"btnspace btnReset",on:{click:t.handleReset}},[t._v("重置")]),a("el-button",{staticClass:"btnOutput",attrs:{type:"primary"},on:{click:t.handleExport}},[t._v("导出数据")])],1)]),a("div",{staticClass:"other"},[a("span",{staticClass:"notice"},[t._v("请输入查询员工和查询周期")]),a("span",{staticClass:"triggerRules",on:{click:t.handleTriggerRules}},[t._v("\n                查看原则\n                "),a("i",{class:[{up:t.isRuleHide},"el-icon-arrow-down"]})])]),a("Rules",{ref:"rules",attrs:{collapse:t.isRuleHide,iconList:"all",height:"105"}},[[a("p",[t._v("\n                    出勤时长=下班时间-上班时间-中午休息时间，若出差无2次打卡时间，则出勤时长=8h；出勤时长合计即日均出勤时长=出勤时长总和/应出勤天数\n                ")]),a("p",[t._v("\n                    上下班时间以钉钉打卡为准;加班天数/小时数，以申请审批时长为准，休假天数，以申请审批时长为准\n                ")]),a("p",[t._v("\n                    若考勤周期内，外勤打卡次数/应打卡次数\n                    >=20%，则标记外勤异常\n                ")])]],2)],1),a("div",{staticClass:"tableWrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.staffDetail.tableLoading,expression:"staffDetail.tableLoading"}],staticStyle:{width:"100%"},attrs:{"header-row-class-name":"header",data:t.staffDetail.data,border:"",height:"calc(100vh - 350px)"}},[a("el-table-column",{attrs:{label:"日期",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"columnWrap"},[a("span",{class:t.dateColor(e.row.date_type)+" text"},[t._v(t._s(e.row.date))]),1===e.row.is_entry?a("i",{class:"statusIcon "+t.icon.ICON_IN}):t._e(),1===e.row.is_resignation?a("i",{class:"statusIcon "+t.icon.ICON_LEAVE}):t._e()])]}}])}),a("el-table-column",{attrs:{label:"上班",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"columnWrap"},[a("span",{staticClass:"text"},[t._v(t._s(e.row.on_duty))]),1===e.row.is_on_duty_outside?a("i",{class:"statusIcon "+t.icon.ICON_OUTSIDE}):t._e()])]}}])}),a("el-table-column",{attrs:{label:"下班",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"columnWrap"},[a("span",{staticClass:"text"},[t._v(t._s(e.row.off_duty))]),1===e.row.is_off_duty_outside?a("i",{class:"statusIcon "+t.icon.ICON_OUTSIDE}):t._e()])]}}])}),a("el-table-column",{attrs:{prop:"duration",label:"出勤时长",width:"90"}}),a("el-table-column",{attrs:{prop:"is_trip",label:"出差",width:"90"}}),a("el-table-column",{attrs:{prop:"overtime",label:"加班",width:"90"}}),a("el-table-column",{attrs:{prop:"days_off",label:"调休",width:"90"}}),a("el-table-column",{attrs:{prop:"annual_leave",label:"休年假",width:"90"}}),a("el-table-column",{attrs:{prop:"affairs_leave",label:"事假",width:"90"}}),a("el-table-column",{attrs:{prop:"sick_leave",label:"病假",width:"90"}}),a("el-table-column",{attrs:{prop:"check_up_leave",label:"产检假",width:"90"}}),a("el-table-column",{attrs:{prop:"funeral_leave",label:"丧假",width:"90"}}),a("el-table-column",{attrs:{prop:"marital_leave",label:"婚假",width:"90"}}),a("el-table-column",{attrs:{prop:"maternity_leave",label:"产假",width:"90"}}),a("el-table-column",{attrs:{prop:"paternity_leave",label:"陪产假",width:"90"}}),a("el-table-column",{attrs:{prop:"abortion_leave",label:"流产假",width:"90"}}),a("el-table-column",{attrs:{prop:"welfare_leave",label:"公益假",width:"90"}}),a("el-table-column",{attrs:{fixed:"right",label:"出勤异常",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"exception"},[t._v(t._s(e.row.abnormal))])]}}])})],1)],1),a("el-table",{staticClass:"tableSum",staticStyle:{width:"100%",height:"50px"},attrs:{data:t.staffDetail.sum,"show-header":!1,"empty-text":"　"}},[a("el-table-column",{attrs:{width:"110"}},[[t._v("\n                合计\n            ")]],2),a("el-table-column",{attrs:{label:"上班",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"columnWrap"},[a("span",[t._v(t._s(e.row.on_duty))]),!0===e.row.is_all_on_duty?a("i",{class:"statusIcon "+t.icon.ICON_ALL}):t._e()])]}}])}),a("el-table-column",{attrs:{label:"下班",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"columnWrap"},[a("span",[t._v(t._s(e.row.off_duty))]),!0===e.row.is_all_off_duty?a("i",{class:"statusIcon "+t.icon.ICON_ALL}):t._e()])]}}])}),a("el-table-column",{attrs:{prop:"duration",label:"出勤时长",width:"90"}}),a("el-table-column",{attrs:{prop:"is_trip",label:"出差",width:"90"}}),a("el-table-column",{attrs:{prop:"overtime",label:"加班",width:"90"}}),a("el-table-column",{attrs:{prop:"days_off",label:"调休",width:"90"}}),a("el-table-column",{attrs:{prop:"annual_leave",label:"休年假",width:"90"}}),a("el-table-column",{attrs:{prop:"affairs_leave",label:"事假",width:"90"}}),a("el-table-column",{attrs:{prop:"sick_leave",label:"病假",width:"90"}}),a("el-table-column",{attrs:{prop:"check_up_leave",label:"产检假",width:"90"}}),a("el-table-column",{attrs:{prop:"funeral_leave",label:"丧假",width:"90"}}),a("el-table-column",{attrs:{prop:"marital_leave",label:"婚假",width:"90"}}),a("el-table-column",{attrs:{prop:"maternity_leave",label:"产假",width:"90"}}),a("el-table-column",{attrs:{prop:"paternity_leave",label:"陪产假",width:"90"}}),a("el-table-column",{attrs:{prop:"abortion_leave",label:"流产假",width:"90"}}),a("el-table-column",{attrs:{prop:"welfare_leave",label:"公益假",width:"90"}}),a("el-table-column",{attrs:{fixed:"right",label:"出勤异常",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"exception"},[t._v(t._s(e.row.abnormal))])]}}])})],1),a("el-pagination",{staticClass:"pagination",attrs:{"page-size":t.search.page_size,layout:"total, sizes, prev, pager, next",total:t.staffDetail.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)},s=[],l=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=(a("386d"),a("28a5"),a("7f7f"),a("2f62")),r=a("5579"),o=a("9d59"),c=a("accb"),u=a("73a5"),d=a("1f93"),p=a("76b8"),h=a("9a02");function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(a,!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={beforeRouteEnter:function(t,e,a){var n=t.query,s=n.name,l=n.workcode,i=n.dateRange,r=i&&i.split(","),o=t.path;a((function(t){t.$router.push(o),s&&l&&r&&(t.$refs.dateRange.value=r,t.search.start=r[0],t.search.stop=r[1],t.search.workcode=l,t.$refs.search.$refs.compoentsSearch.selectedLabel=s)}))},components:{Search:o["a"],Rules:c["a"],LimitDateRange:d["a"]},data:function(){var t=this;return{pickerOptions:{disabledDate:t.disabledDate,onPick:function(e){e.maxDate;var a=e.minDate;t.minDate=a}},isRuleHide:!0,search:{workcode:"",start:"",stop:"",page:1,page_size:30},api:{empl:p["p"]},icon:{ICON_OUTSIDE:h["f"],ICON_ALL:h["c"],ICON_IN:h["d"],ICON_LEAVE:h["e"]}}},watch:{search:{deep:!0,handler:function(t,e){t.start&&t.stop&&t.workcode&&this.refresh(this.search)}}},created:function(){this.refresh=Object(r["a"])(this.getStaffDetailList,800)},methods:b({},Object(i["b"])(["getStaffDetailList","staffDetailExportReport","resetStaffDetail"]),{dateRangeChange:function(t){this.search.start=t[0],this.search.stop=t[1]},handleSelect:function(t){this.search.workcode=t},handleTriggerRules:function(){this.isRuleHide=!this.isRuleHide,this.$refs.rules.handleTriggerRules()},handleReset:function(){for(var t in this.search)"page"!==t&&"page_size"!==t&&(this.search[t]="");this.$refs.dateRange.reset(),this.$refs.search.reset(),this.resetStaffDetail()},handleCurrentChange:function(t){this.search.page=t},handleSizeChange:function(t){this.search.page_size=t},handleExport:function(){this.search.start&&this.search.stop&&this.search.workcode?this.staffDetailExportReport(this.search):Object(u["c"])({message:"请输入查询员工和查询周期"})},dateColor:function(t){return 1===t?"restDay":2===t?"festvalDay":void 0}}),computed:b({},Object(i["d"])({staffDetail:function(t){return t.staffDetail}}))},v=m,_=(a("b500"),a("2877")),g=Object(_["a"])(v,n,s,!1,null,"c36afaa6",null);e["default"]=g.exports},5579:function(t,e,a){"use strict";var n=function(t,e,a){var n,s,l,i=0;a||(a={});var r=function(){i=!1===a.leading?0:(new Date).getTime(),n=null,t.apply(s,l),n||(s=l=null)},o=function(){var o=(new Date).getTime();i||!1!==a.leading||(i=o);var c=e-(o-i);s=this,l=arguments,c<=0||c>e?(n&&(clearTimeout(n),n=null),i=o,t.apply(s,l),n||(s=l=null)):n||!1===a.trailing||(n=setTimeout(r,c))};return o};e["a"]=n},"73a5":function(t,e,a){"use strict";a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return r}));var n=a("5c96"),s=a("b7ea"),l=function(t){Object(n["Notification"])({type:"success",title:s["l"],message:t.message||s["i"],duration:t.duration||2e3})},i=function(t){var e={};try{e=JSON.parse(t.message)}catch(e){console.log(e)}Object(n["Notification"])({type:"error",title:s["j"],message:e.message||s["h"],duration:t.duration||1e4})},r=function(t){Object(n["Notification"])({type:"warning",title:s["m"],message:t.message||"",duration:t.duration||3e3})}},"76de":function(t,e,a){"use strict";var n=a("808c"),s=a.n(n);s.a},"808c":function(t,e,a){},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},8678:function(t,e,a){"use strict";var n=a("ee11"),s=a.n(n);s.a},"86ce":function(t,e,a){},"9a02":function(t,e,a){"use strict";a.d(e,"f",(function(){return l})),a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return u}));var n="icon_rest",s="icon_festival",l="icon_outside",i="icon_all",r="icon_in",o="icon_leave",c="icon_elasticity",u=[{name:"休息日",icon:n},{name:"节假日",icon:s},{name:"外勤打卡",icon:l},{name:"无缺卡",icon:i},{name:"入职",icon:r},{name:"离职",icon:o}]},"9d41":function(t,e,a){},"9d59":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",t._b({ref:"compoentsSearch",staticClass:"searchwrap",class:t.className,attrs:{"remote-method":t.query,filterable:"",remote:"",loading:t.loading,"no-data-text":t.noResultText,"no-match-text":t.noResultText,"loading-text":t.loadingText},on:{change:t._handleSelect,"remove-tag":t._handleRemoveTag},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},"el-select",t.$attrs,!1),t._l(t.list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}},[e.workcode?[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("span",{staticClass:"addr"},[t._v("-"+t._s(e.value))])]:t._e()],2)})),1)},s=[],l=a("14f7"),i=a("5579"),r={data:function(){return{state:"",list:[],currentSearchText:"",loading:!1,noResultText:"没有搜索到数据",loadingText:"努力搜索中"}},props:{className:{type:String},fetchUrl:{type:String,required:!0},handleSelect:{type:Function,required:!1},handleRemoveTag:{type:Function,required:!1}},created:function(){this.query=Object(i["a"])(this.querySearch,500)},methods:{querySearch:function(t){var e=this,a=this;""!==t&&(0!==this.list.length&&this.currentSearchText===t||(this.loading=!0,Object(l["b"])(this.fetchUrl,{q:t,n:10}).then((function(e){var n=e.data.data;n&&Array.isArray(n)&&n.length>0?(a.currentSearchText=t,a.list=a.adapter(n)):a.list=[]})).catch((function(t){console.log(t)})).finally((function(){e.loading=!1}))))},_handleSelect:function(t){"function"===typeof this.handleSelect&&this.handleSelect(t)},_handleRemoveTag:function(t){"function"===typeof this.handleRemoveTag&&this.handleRemoveTag(t)},adapter:function(t){return t.map((function(t,e){for(var a in t)switch(a){case"workcode":t.value=t[a];break;case"department_id":t.value=t[a],delete t[a];break}return t}))},reset:function(){this.state="",this.list=[],this.currentSearchText=""}}},o=r,c=(a("76de"),a("2877")),u=Object(c["a"])(o,n,s,!1,null,"4141a937",null);e["a"]=u.exports},accb:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:[{hide:t.myCollapse},"rules"],style:{height:t.height+"px"}},[t.rulesIconList.length>0?a("div",{staticClass:"iconWrap"},t._l(t.rulesIconList,(function(e,n){return a("div",{key:n,staticClass:"part"},[a("i",{class:"statusIcon "+e.icon}),a("span",{staticClass:"label"},[t._v(t._s(e.name))])])})),0):t._e(),a("div",{staticClass:"text"},[t._t("default")],2)])},s=[],l=(a("7f7f"),a("9a02")),i={data:function(){return{myCollapse:this.collapse}},props:{collapse:{default:!0,type:Boolean},iconList:{type:String},height:{type:String}},methods:{handleTriggerRules:function(){this.myCollapse=!this.myCollapse}},computed:{rulesIconList:function(){var t=this;return this.iconList?"all"===this.iconList?l["b"]:l["b"].filter((function(e){return t.iconList.indexOf(e.name)>-1})):[]}}},r=i,o=(a("8678"),a("2cf0"),a("2877")),c=Object(o["a"])(r,n,s,!1,null,"5933f05e",null);e["a"]=c.exports},b500:function(t,e,a){"use strict";var n=a("9d41"),s=a.n(n);s.a},be16:function(t,e,a){},e6a2:function(t,e,a){"use strict";var n=a("86ce"),s=a.n(n);s.a},ee11:function(t,e,a){}}]);
//# sourceMappingURL=chunk-11e8de62.b033aa26.js.map