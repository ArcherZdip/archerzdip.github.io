(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63306596"],{1581:function(t,e,a){},"252c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"selectWrap"},[a("div",{staticClass:"row"},[a("div",{staticClass:"part"},[a("span",{staticClass:"label"},[t._v("考勤周期：")]),a("LimitDateRange",{ref:"dateRange",attrs:{className:"input",limit:2,width:"256","value-format":"yyyy-MM-dd"},on:{change:t.dateRangeChange}})],1),a("div",{staticClass:"part"},[a("span",{staticClass:"label"},[t._v("员工类型：")]),a("el-select",{staticClass:"input",staticStyle:{width:"256px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择",disabled:!t.departmentStatistics.params.is_show_empl},model:{value:t.search.empl_type,callback:function(e){t.$set(t.search,"empl_type",e)},expression:"search.empl_type"}},t._l(t.staffTypes,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1),a("div",{staticClass:"part"},[a("span",{staticClass:"label"},[t._v("部门：")]),a("Search",{ref:"search",staticClass:"input",staticStyle:{width:"256px"},attrs:{fetchUrl:t.api.dep,placeholder:"请输入部门名称",handleSelect:t.handleSelect,"collapse-tags":""}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"part"},[a("span",{staticClass:"label"},[t._v("　　职级：")]),a("LevelRange",{ref:"levelRange",attrs:{disabled:!t.departmentStatistics.params.is_show_level},on:{change:t.handleLevelChange}}),a("span",{staticClass:"triggerRules",on:{click:t.handleTriggerRules}},[t._v("\n                    查看原则\n                    "),a("i",{class:[{up:t.isRuleHide},"el-icon-arrow-down"]})])],1),a("div",{staticClass:"btnWrap"},[a("el-button",{staticClass:"btn btnspace btnReset",on:{click:t.handleReset}},[t._v("重置")]),a("el-button",{staticClass:"btnOutput",attrs:{type:"primary"},on:{click:function(e){return t.depStatisticsExportReport(t.search)}}},[t._v("导出数据")])],1)]),a("Rules",{ref:"rules",attrs:{collapse:t.isRuleHide,height:"35"}},[t._v("\n            所有数据为部门内每名员工的日均数据，除以在职人数进行人均计算\n        ")])],1),a("div",{staticClass:"main"},[a("div",{staticClass:"nav"},[a("span",{staticClass:"label"},[t._v("部门")]),t.departmentStatistics.breadcrumbData.length>0?a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},t._l(t.departmentStatistics.breadcrumbData,(function(e,s){return a("el-breadcrumb-item",{key:s,class:[{up:s===t.departmentStatistics.breadcrumbData.length-1}],attrs:{to:{path:"/departmentStatistics",query:{dep_code:e.code,dep_name:e.name}}}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),1):t._e()],1),a("div",{staticClass:"tableWrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.departmentStatistics.tableLoading,expression:"departmentStatistics.tableLoading"}],staticStyle:{width:"100%",overflow:"auto"},attrs:{"header-row-class-name":"header",data:t.departmentStatistics.data,border:"",height:"calc(100vh - 330px)"}},[a("el-table-column",{attrs:{label:"部门",width:"188"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"columnWrap"},[a("span",[t._v(t._s(e.row.department_name))]),!0===e.row.is_flexible?a("i",{class:"statusIcon "+t.icon.ELASTICITY}):t._e()])]}}])}),a("el-table-column",{attrs:{prop:"department_code",label:"部门ID",width:"100"}}),a("el-table-column",{attrs:{prop:"on_avg",label:"平均上班打卡",width:"110"}}),a("el-table-column",{attrs:{prop:"off_avg",label:"平均下班打卡",width:"110"}}),a("el-table-column",{attrs:{prop:"duration_avg",label:"平均出勤时长",width:"110"}}),a("el-table-column",{attrs:{prop:"work_avg",label:"平均工作时长",width:"110"}}),a("el-table-column",{attrs:{prop:"trip_avg",label:"平均出差"}}),a("el-table-column",{attrs:{prop:"overtime_avg",label:"平均加班"}}),a("el-table-column",{attrs:{prop:"days_off_avg",label:"平均调休"}}),a("el-table-column",{attrs:{prop:"annual_avg",label:"平均休年假",width:"100"}}),a("el-table-column",{attrs:{prop:"affairs_avg",label:"平均事假"}}),a("el-table-column",{attrs:{prop:"sick_avg",label:"平均病假"}}),a("el-table-column",{attrs:{prop:"check_up_avg",label:"平均产检假",width:"100"}}),a("el-table-column",{attrs:{prop:"funeral_avg",label:"平均丧假"}}),a("el-table-column",{attrs:{prop:"marital_avg",label:"平均婚假"}}),a("el-table-column",{attrs:{prop:"maternity_avg",label:"平均产假"}}),a("el-table-column",{attrs:{prop:"paternity_avg",label:"平均陪产假",width:"100"}}),a("el-table-column",{attrs:{prop:"abortion_avg",label:"平均流产假",width:"100"}}),a("el-table-column",{attrs:{prop:"welfare_avg",label:"平均公益假",width:"100"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"174"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"operating",staticStyle:{width:"50%"},attrs:{type:"text"},on:{click:function(a){return t.goNextDep(e.row)}}},[t._v("展开下级")]),a("el-button",{staticClass:"operating",staticStyle:{width:"50%"},attrs:{type:"text"},on:{click:function(a){return t.goStaff(e.row)}}},[t._v("人员列表")])]}}])})],1),a("el-pagination",{staticClass:"pagination",attrs:{"page-size":t.search.page_size,layout:"total, sizes, prev, pager, next",total:t.departmentStatistics.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])])},r=[],l=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),n=a("75fc"),i=(a("386d"),a("2f62")),c=a("5579"),o=a("9d59"),p=a("accb"),d=a("a57e"),u=a("1f93"),h=a("76b8"),b=a("12e5"),f=a("9a02");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(a,!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var v={beforeRouteUpdate:function(t,e,a){var s=t.query,r=s.dep_code,l=s.dep_name;r&&l&&(this.search.dept_code=r,this.$refs.search.$refs.compoentsSearch.selectedLabel=l)},components:{Search:o["a"],Rules:p["a"],LevelRange:d["a"],LimitDateRange:u["a"]},data:function(){return{isRuleHide:!0,search:{empl_type:[],dept_code:"",start:"",stop:"",level_start:"",level_stop:"",page:1,page_size:30},staffTypes:b["f"],levelList:b["d"],api:{dep:h["o"]},icon:{ELASTICITY:f["a"]},initLock:!0}},watch:{computedDateRange:function(){var t;this.initLock&&(t=this.$refs.dateRange.value).push.apply(t,Object(n["a"])(this.computedDateRange))},search:{deep:!0,handler:function(t,e){!this.initLock&&this.refresh(this.search),this.initLock=!1}}},created:function(){this.refresh=Object(c["a"])(this.getDepStatisticsList,800),this.refresh(this.search)},methods:g({},Object(i["b"])(["getDepStatisticsList","depStatisticsExportReport"]),{dateRangeChange:function(t){t&&2===t.length&&(this.search.start=t[0],this.search.stop=t[1])},handleTriggerRules:function(){this.isRuleHide=!this.isRuleHide,this.$refs.rules.handleTriggerRules()},handleSelect:function(t){this.search.dept_code=t},handleReset:function(){for(var t in this.search)"page"!==t&&"page_size"!==t&&(this.search[t]="");this.$refs.dateRange.reset(),this.$refs.search.reset(),this.$refs.levelRange.reset()},handleCurrentChange:function(t){this.search.page=t},handleSizeChange:function(t){this.search.page_size=t},goStaff:function(t){this.$router.push({path:"/staffStatistics",query:{dep_code:t.department_code,dep_name:t.department_name,dateRange:"".concat(this.search.start,",").concat(this.search.stop)}})},goNextDep:function(t){this.search.dept_code=t.department_code,this.$refs.search.$refs.compoentsSearch.selectedLabel=t.department_name},handleLevelChange:function(t,e){this.search.level_start=t,this.search.level_stop=e}}),computed:g({},Object(i["d"])({departmentStatistics:function(t){return t.departmentStatistics},defaultDateStart:function(t){return t.departmentStatistics.params.start||""},defaultDateStop:function(t){return t.departmentStatistics.params.stop||""}}),{computedDateRange:function(){return[this.defaultDateStart||"",this.defaultDateStop||""]}})},_=v,w=(a("bd72"),a("2877")),S=Object(w["a"])(_,s,r,!1,null,"316518f1",null);e["default"]=S.exports},bd72:function(t,e,a){"use strict";var s=a("1581"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-63306596.f1c24aa2.js.map