(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f12aa244"],{"73a5":function(t,e,a){"use strict";a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return o}));var s=a("5c96"),n=a("b7ea"),l=function(t){Object(s["Notification"])({type:"success",title:n["l"],message:t.message||n["i"],duration:t.duration||2e3})},r=function(t){var e={};try{e=JSON.parse(t.message)}catch(e){console.log(e)}Object(s["Notification"])({type:"error",title:n["j"],message:e.message||n["h"],duration:t.duration||1e4})},o=function(t){Object(s["Notification"])({type:"warning",title:n["m"],message:t.message||"",duration:t.duration||3e3})}},a871:function(t,e,a){"use strict";var s=a("d8c5"),n=a.n(s);n.a},d8c5:function(t,e,a){},eed1:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"selectWrap"},[a("div",{staticClass:"row"},[a("div",{staticClass:"part"},[a("span",{staticClass:"label"},[t._v("部门：")]),a("Search",{ref:"search",staticStyle:{width:"256px"},attrs:{className:"input",fetchUrl:t.api.dep,placeholder:"请输入部门名称",handleSelect:t.handleSelect,multiple:"","collapse-tags":""}})],1),a("div",{staticClass:"part"},[a("span",{staticClass:"label"},[t._v("考勤周期：")]),a("LimitDateRange",{ref:"dateRange",attrs:{limit:2,width:"256","value-format":"yyyy-MM-dd"},on:{change:t.dateRangeChange}})],1),a("div",{staticClass:"part"},[a("span",{staticClass:"label"},[t._v("员工类型：")]),a("el-select",{staticClass:"input",staticStyle:{width:"256px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.search.empl_type,callback:function(e){t.$set(t.search,"empl_type",e)},expression:"search.empl_type"}},t._l(t.staffTypes,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"part"},[a("span",{staticClass:"label"},[t._v("职级：")]),a("LevelRange",{ref:"levelRange",on:{change:t.handleLevelChange}})],1),a("div",{staticClass:"part"},[a("span",{staticClass:"label"},[t._v("员工状态：")]),a("el-select",{staticClass:"input",staticStyle:{width:"256px"},attrs:{placeholder:"请选择"},model:{value:t.search.empl_status,callback:function(e){t.$set(t.search,"empl_status",e)},expression:"search.empl_status"}},t._l(t.staffStatus,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1),a("div",{staticClass:"btnWrap part"},[a("el-button",{staticClass:"btn btnspace btnReset",on:{click:t.handleReset}},[t._v("重置")]),a("el-dropdown",{staticClass:"btn",on:{command:t.handleCommand}},[a("el-button",{staticClass:"btnOutput",attrs:{type:"primary"}},[t._v("\n                        导出数据"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"list"}},[t._v("签字表")]),a("el-dropdown-item",{attrs:{command:"salary"}},[t._v("逆向算薪表")])],1)],1)],1)]),a("div",{staticClass:"other"},[a("span",{staticClass:"notice"},[t._v("请输入查询员工和查询周期")]),a("span",{staticClass:"triggerRules",on:{click:t.handleTriggerRules}},[t._v("\n                查看原则\n                "),a("i",{class:[{up:t.isRuleHide},"el-icon-arrow-down"]})])]),a("Rules",{ref:"rules",attrs:{collapse:t.isRuleHide,iconList:"无缺卡,离职",height:"85"}},[[a("p",[t._v("\n                    日均出勤时长=出勤时长总和 / 应出勤天数\n                    =《员工出勤明细表》出勤时长合计\n                ")]),a("p",[t._v("\n                    日均工作时长，等于去除员工出差、加班、调休、请假的天数，计算日均出勤时长\n                ")])]],2)],1),a("div",{staticClass:"tableWrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.staffStatistics.tableLoading,expression:"staffStatistics.tableLoading"}],staticStyle:{width:"100%",overflow:"auto"},attrs:{"header-row-class-name":"header",data:t.staffStatistics.data,border:"",height:"calc(100vh - 320px)"}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{class:[t.tableTextColor(e.row.is_resignation),"name_router"],attrs:{type:"text"},on:{click:function(a){return t.goDetail(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{label:"员工编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.workcode))])]}}])}),a("el-table-column",{attrs:{label:"应出勤天数",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.attendance_days))])]}}])}),a("el-table-column",{attrs:{label:"上班打卡",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"columnWrap"},[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.on_counts))]),1===e.row.is_all_on_duty?a("i",{class:"statusIcon "+t.icon.ICON_ALL}):t._e()])]}}])}),a("el-table-column",{attrs:{label:"下班打卡",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"columnWrap"},[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.off_counts))]),1===e.row.is_all_off_duty?a("i",{class:"statusIcon "+t.icon.ICON_ALL}):t._e()])]}}])}),a("el-table-column",{attrs:{label:"日均出勤时长",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.duration))])]}}])}),a("el-table-column",{attrs:{label:"日均工作时长",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.duration_work))])]}}])}),a("el-table-column",{attrs:{label:"出差"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.trip))])]}}])}),a("el-table-column",{attrs:{label:"加班"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.overtime))])]}}])}),a("el-table-column",{attrs:{label:"休年假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.annual))])]}}])}),a("el-table-column",{attrs:{label:"事假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.affairs))])]}}])}),a("el-table-column",{attrs:{label:"病假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.sick))])]}}])}),a("el-table-column",{attrs:{label:"产检假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.check_up))])]}}])}),a("el-table-column",{attrs:{label:"丧假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.funeral))])]}}])}),a("el-table-column",{attrs:{label:"婚假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.marital))])]}}])}),a("el-table-column",{attrs:{label:"产假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.maternity))])]}}])}),a("el-table-column",{attrs:{label:"陪产假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.paternity))])]}}])}),a("el-table-column",{attrs:{label:"流产假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.abortion))])]}}])}),a("el-table-column",{attrs:{label:"公益假"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.tableTextColor(e.row.is_resignation)},[t._v(t._s(e.row.welfare))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"出勤异常"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:[t.tableTextColor(e.row.is_resignation),"exception"]},[t._v(t._s(e.row.abnormal))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"外勤异常"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:[t.tableTextColor(e.row.is_resignation),"exception"]},[t._v(t._s(e.row.out_abnormal))])]}}])})],1),a("el-pagination",{staticClass:"pagination",attrs:{"page-size":t.search.page_size,layout:"total, sizes, prev, pager, next",total:t.staffStatistics.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])},n=[],l=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),r=(a("386d"),a("28a5"),a("2f62")),o=a("5579"),i=(a("50cc"),a("9d59")),c=a("accb"),u=a("a57e"),d=a("73a5"),p=a("1f93"),f=a("76b8"),_=a("12e5"),h=a("9a02");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(a,!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={beforeRouteEnter:function(t,e,a){var s=t.query,n=s.dep_code,l=s.dep_name,r=s.dateRange,o=r&&r.split(","),i=t.path;a((function(t){t.$router.push(i),n&&l&&o&&(t.handleReset(),t.$refs.dateRange.value=o,t.search.start=o[0],t.search.stop=o[1],t.search.dept_code=n,t.$refs.search.state=[l])}))},components:{Search:i["a"],Rules:c["a"],LevelRange:u["a"],LimitDateRange:p["a"]},data:function(){return{isRuleHide:!0,search:{start:"",stop:"",empl_type:[],empl_status:"",dept_code:"",level_start:"",level_stop:"",page:1,page_size:30},staffTypes:_["f"],staffStatus:_["e"],api:{dep:f["o"]},icon:{ICON_ALL:h["c"]}}},watch:{search:{deep:!0,handler:function(t,e){t.start&&t.stop&&t.dept_code&&this.refresh(this.search)}}},created:function(){this.refresh=Object(o["a"])(this.getStaffStatisticsList,800)},methods:g({},Object(r["b"])(["getStaffStatisticsList","staffStatisticsListExportReport","staffStatisticsSalaryExportReport","resetStaffStatistics"]),{dateRangeChange:function(t){this.search.start=t[0],this.search.stop=t[1]},handleCollapseClick:function(){this.collapseTrigger()},handleTriggerRules:function(){this.isRuleHide=!this.isRuleHide,this.$refs.rules.handleTriggerRules()},handleSelect:function(t){this.search.dept_code=t.join(",")},handleReset:function(){for(var t in this.search)"page"!==t&&"page_size"!==t&&(this.search[t]="");this.$refs.dateRange.reset(),this.$refs.search.reset(),this.$refs.levelRange.reset(),this.resetStaffStatistics()},handleCurrentChange:function(t){this.search.page=t},handleSizeChange:function(t){this.search.page_size=t},handleCommand:function(t){if(this.search.start&&this.search.stop&&this.search.dept_code)switch(t){case"list":this.staffStatisticsListExportReport(this.search);break;case"salary":this.staffStatisticsSalaryExportReport(this.search);break}else Object(d["c"])({message:"请输入查询员工和查询周期"})},goDetail:function(t){this.$router.push({path:"/staffDetail",query:{name:t.name,workcode:t.workcode,dateRange:"".concat(this.search.start,",").concat(this.search.stop)}})},handleLevelChange:function(t,e){this.search.level_start=t,this.search.level_stop=e},tableTextColor:function(t){if(1===t)return{leaveDay:!0}}}),computed:g({},Object(r["d"])({staffStatistics:function(t){return t.staffStatistics}}))},m=w,v=(a("a871"),a("2877")),y=Object(v["a"])(m,s,n,!1,null,"26999bfd",null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-f12aa244.a912177b.js.map